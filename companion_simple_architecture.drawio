<mxfile host="app.diagrams.net">
  <diagram id="companion-simple-arch" name="é™ªä¼´Agentç®€æ˜“æž¶æž„å›¾">
    <mxGraphModel dx="1426" dy="774" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1000">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- ç”¨æˆ·è¾“å…¥ -->
        <mxCell id="user-input" value="ðŸ‘¤ ç”¨æˆ·è¾“å…¥" style="rounded=1;fillColor=#e0f2fe;strokeColor=#0284c7;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="200" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- è·¯ç”±å†³ç­– -->
        <mxCell id="router" value="ðŸ§­ è·¯ç”±å†³ç­–LLM&#xa;- åˆ†æžç”¨æˆ·æ„å›¾&#xa;- è¾“å‡ºJSONè·¯ç”±" style="rounded=1;fillColor=#ddd6fe;strokeColor=#7c3aed;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="220" y="200" width="140" height="60" as="geometry" />
        </mxCell>

        <!-- JSONè§£æž -->
        <mxCell id="parser" value="âš™ï¸ JSONè§£æžå™¨&#xa;- æå–routeå­—æ®µ&#xa;- fallbackå¤„ç†" style="rounded=1;fillColor=#fed7aa;strokeColor=#ea580c;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="410" y="200" width="140" height="60" as="geometry" />
        </mxCell>

        <!-- è·¯ç”±åˆ†æ”¯ -->
        <mxCell id="branch" value="ðŸ”€ è·¯ç”±åˆ†æ”¯&#xa;- fast | smart | vip" style="rhombus;fillColor=#f3f4f6;strokeColor=#6b7280;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="200" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- å¿«é€Ÿé€šé“ - æƒ…ç»ªè¯†åˆ« -->
        <mxCell id="fast-emotion" value="ðŸ‘ï¸ å¿«é€Ÿæƒ…ç»ªè¯†åˆ«&#xa;(qwen-turbo)" style="rounded=1;fillColor=#a7f3d0;strokeColor=#059669;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="800" y="100" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- å¿«é€Ÿé€šé“ - ç®€å•å¯¹è¯ -->
        <mxCell id="fast-chat" value="ðŸ’¬ ç®€å•å¯¹è¯ç”Ÿæˆ&#xa;(qwen-7b)" style="rounded=1;fillColor=#a7f3d0;strokeColor=#059669;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1000" y="100" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- å¿«é€Ÿé€šé“ - è´¨é‡æ£€æŸ¥ -->
        <mxCell id="fast-critic" value="âœ… å¿«é€Ÿè´¨æ£€&#xa;(qwen-7b)" style="rounded=1;fillColor=#fef3c7;strokeColor=#f59e0b;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1200" y="100" width="120" height="50" as="geometry" />
        </mxCell>

        <!-- æ™ºèƒ½é€šé“ - æƒ…ç»ªåˆ†æž -->
        <mxCell id="smart-emotion" value="ðŸ‘ï¸ æ™ºèƒ½æƒ…ç»ªåˆ†æž&#xa;(qwen-7b)" style="rounded=1;fillColor=#a7f3d0;strokeColor=#059669;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="800" y="200" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- æ™ºèƒ½é€šé“ - ä»»åŠ¡ç¼–æŽ’ -->
        <mxCell id="smart-orchestrator" value="ðŸŽ¯ ä»»åŠ¡ç¼–æŽ’å¤§å¸ˆ&#xa;(qwen-32b)" style="rounded=1;fillColor=#a7f3d0;strokeColor=#059669;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1000" y="200" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- æ™ºèƒ½é€šé“ - æ™ºèƒ½å¯¹è¯ -->
        <mxCell id="smart-chat" value="ðŸ§  æ™ºèƒ½å¯¹è¯ç”Ÿæˆ&#xa;(deepseek-v3)" style="rounded=1;fillColor=#a7f3d0;strokeColor=#059669;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1200" y="200" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- æ™ºèƒ½é€šé“ - è´¨é‡æ£€æŸ¥ -->
        <mxCell id="smart-critic" value="âœ… æ™ºèƒ½è´¨æ£€&#xa;(qwen-32b)" style="rounded=1;fillColor=#fef3c7;strokeColor=#f59e0b;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1400" y="200" width="120" height="50" as="geometry" />
        </mxCell>

        <!-- VIPé€šé“ - å¿ƒç†å’¨è¯¢ -->
        <mxCell id="vip-chat" value="ðŸ‘‘ VIPå¿ƒç†å’¨è¯¢&#xa;(deepseek-v3)" style="rounded=1;fillColor=#fde68a;strokeColor=#f59e0b;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1000" y="300" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- å˜é‡èšåˆå™¨ -->
        <mxCell id="aggregator" value="ðŸ“¦ å˜é‡èšåˆå™¨&#xa;- æ”¶é›†å„è·¯å¾„è¾“å‡º" style="rounded=1;fillColor=#f3f4f6;strokeColor=#6b7280;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1600" y="200" width="120" height="50" as="geometry" />
        </mxCell>

        <!-- æœ€ç»ˆè´¨é‡æ£€æŸ¥ -->
        <mxCell id="final-critic" value="ðŸ” æœ€ç»ˆå®‰å…¨æ£€æŸ¥&#xa;(qwen-7b)" style="rounded=1;fillColor=#fca5a5;strokeColor=#b91c1c;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1800" y="200" width="120" height="50" as="geometry" />
        </mxCell>

        <!-- æœ€ç»ˆå›žå¤ -->
        <mxCell id="answer" value="ðŸ’­ æœ€ç»ˆå›žå¤&#xa;ç»™ç”¨æˆ·" style="rounded=1;fillColor=#d1fae5;strokeColor=#10b981;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="2000" y="200" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- è¿žæŽ¥çº¿ -->
        <!-- ä¸»æµç¨‹ -->
        <mxCell id="flow1" edge="1" source="user-input" target="router" parent="1" style="strokeWidth=2;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="flow2" edge="1" source="router" target="parser" parent="1" style="strokeWidth=2;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="flow3" edge="1" source="parser" target="branch" parent="1" style="strokeWidth=2;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- å¿«é€Ÿé€šé“æµç¨‹ -->
        <mxCell id="fast1" edge="1" source="branch" target="fast-emotion" parent="1" style="strokeWidth=2;strokeColor=#059669;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="720" y="230" />
              <mxPoint x="720" y="125" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fast-label" value="Fastè·¯å¾„" style="edgeLabel;html=1;fontSize=10;" vertex="1" parent="fast1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fast2" edge="1" source="fast-emotion" target="fast-chat" parent="1" style="strokeWidth=2;strokeColor=#059669;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fast3" edge="1" source="fast-chat" target="fast-critic" parent="1" style="strokeWidth=2;strokeColor=#059669;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- æ™ºèƒ½é€šé“æµç¨‹ -->
        <mxCell id="smart1" edge="1" source="branch" target="smart-emotion" parent="1" style="strokeWidth=2;strokeColor=#7c3aed;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="smart-label" value="Smartè·¯å¾„" style="edgeLabel;html=1;fontSize=10;" vertex="1" parent="smart1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="smart2" edge="1" source="smart-emotion" target="smart-orchestrator" parent="1" style="strokeWidth=2;strokeColor=#7c3aed;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="smart3" edge="1" source="smart-orchestrator" target="smart-chat" parent="1" style="strokeWidth=2;strokeColor=#7c3aed;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="smart4" edge="1" source="smart-chat" target="smart-critic" parent="1" style="strokeWidth=2;strokeColor=#7c3aed;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- VIPé€šé“æµç¨‹ -->
        <mxCell id="vip1" edge="1" source="branch" target="vip-chat" parent="1" style="strokeWidth=2;strokeColor=#f59e0b;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="720" y="300" />
              <mxPoint x="930" y="325" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vip-label" value="VIPè·¯å¾„" style="edgeLabel;html=1;fontSize=10;" vertex="1" parent="vip1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- èšåˆå’Œæœ€ç»ˆæµç¨‹ -->
        <mxCell id="agg1" edge="1" source="fast-critic" target="aggregator" parent="1" style="dashed=1;strokeColor=#059669;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1320" y="125" />
              <mxPoint x="1660" y="125" />
              <mxPoint x="1660" y="225" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="agg2" edge="1" source="smart-critic" target="aggregator" parent="1" style="dashed=1;strokeColor=#7c3aed;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="agg3" edge="1" source="vip-chat" target="aggregator" parent="1" style="dashed=1;strokeColor=#f59e0b;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1140" y="325" />
              <mxPoint x="1660" y="325" />
              <mxPoint x="1660" y="225" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- é‡è¯•æœºåˆ¶ -->
        <mxCell id="retry-fast" edge="1" source="fast-critic" target="fast-chat" parent="1" style="dashed=1;strokeColor=#dc2626;curved=1;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1260" y="80" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="retry-fast-label" value="âŒ ä¸é€šè¿‡&#xa;é‡è¯•" style="edgeLabel;html=1;fontSize=8;" vertex="1" parent="retry-fast">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="retry-smart" edge="1" source="smart-critic" target="smart-chat" parent="1" style="dashed=1;strokeColor=#dc2626;curved=1;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1460" y="180" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="retry-smart-label" value="âŒ ä¸é€šè¿‡&#xa;é‡è¯•" style="edgeLabel;html=1;fontSize=8;" vertex="1" parent="retry-smart">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="final-flow1" edge="1" source="aggregator" target="final-critic" parent="1" style="strokeWidth=2;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="final-flow2" edge="1" source="final-critic" target="answer" parent="1" style="strokeWidth=2;strokeColor=#10b981;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- æ ‡é¢˜ -->
        <mxCell id="title" value="AIä¼´ä¾£Agentç®€æ˜“æž¶æž„å›¾ V1.0" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=18;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="20" width="400" height="30" as="geometry" />
        </mxCell>

        <!-- å›¾ä¾‹ -->
        <mxCell id="legend" value="å›¾ä¾‹" style="swimlane;fillColor=#f3f4f6;strokeColor=#6b7280;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1800" y="50" width="300" height="120" as="geometry" />
        </mxCell>
        <mxCell id="legend1" value="ðŸŸ¢ å®žçº¿ç®­å¤´: åŒæ­¥æµç¨‹" style="text;html=1;align=left;" vertex="1" parent="legend">
          <mxGeometry x="10" y="25" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend2" value="ðŸŸ¡ è™šçº¿ç®­å¤´: èšåˆ/é‡è¯•" style="text;html=1;align=left;" vertex="1" parent="legend">
          <mxGeometry x="10" y="45" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend3" value="ðŸ”µ Fastè·¯å¾„: ç®€å•å¯¹è¯" style="text;html=1;align=left;" vertex="1" parent="legend">
          <mxGeometry x="10" y="65" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend4" value="ðŸŸ£ Smartè·¯å¾„: å¤æ‚ä»»åŠ¡" style="text;html=1;align=left;" vertex="1" parent="legend">
          <mxGeometry x="10" y="85" width="150" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend5" value="ðŸŸ  VIPè·¯å¾„: ä¸“ä¸šå’¨è¯¢" style="text;html=1;align=left;" vertex="1" parent="legend">
          <mxGeometry x="10" y="105" width="150" height="15" as="geometry" />
        </mxCell>

        <!-- æ€§èƒ½æŒ‡æ ‡ -->
        <mxCell id="perf" value="å…³é”®æŒ‡æ ‡&#xa;â€¢ Fast: &lt;500ms&#xa;â€¢ Smart: &lt;1.5s&#xa;â€¢ VIP: &lt;2s" style="text;html=1;strokeColor=#059669;fillColor=#d1fae5;align=left;verticalAlign=top;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="50" width="150" height="80" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>