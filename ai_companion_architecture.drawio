<mxfile host="app.diagrams.net">
  <diagram id="ai-companion-arch" name="AIä¼´ä¾£Agentæž¶æž„">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1700" pageHeight="1400">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- å®¢æˆ·ç«¯å±‚ -->
        <mxCell id="client-layer" value="ðŸŽ¨ å®¢æˆ·ç«¯å±‚ (iOS/Android)" style="swimlane;fillColor=#e0f2fe;strokeColor=#0284c7;strokeWidth=2;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="50" y="50" width="300" height="150" as="geometry" />
        </mxCell>
        <mxCell id="user-ui" value="ðŸ‘¤ ç”¨æˆ·ç•Œé¢" style="rounded=1;fillColor=#bfdbfe;strokeColor=#0284c7;" vertex="1" parent="client-layer">
          <mxGeometry x="20" y="40" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="memory-ui" value="ðŸ’­ è®°å¿†ç®¡ç†ç•Œé¢" style="rounded=1;fillColor=#bfdbfe;strokeColor=#0284c7;" vertex="1" parent="client-layer">
          <mxGeometry x="160" y="40" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="settings" value="âš™ï¸ è®¾ç½®ä¸­å¿ƒ" style="rounded=1;fillColor=#bfdbfe;strokeColor=#0284c7;" vertex="1" parent="client-layer">
          <mxGeometry x="90" y="90" width="120" height="30" as="geometry" />
        </mxCell>
        
        <!-- APIç½‘å…³ -->
        <mxCell id="gateway" value="ðŸšª APIç½‘å…³&#xa;- é‰´æƒ/é™æµ&#xa;- æ—¥å¿—åŸ‹ç‚¹&#xa;- ðŸš¨è¾“å…¥å®‰å…¨é¢„æ£€" style="rounded=1;fillColor=#fef3c7;strokeColor=#f59e0b;strokeWidth=2;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="150" y="250" width="180" height="80" as="geometry" />
        </mxCell>
        
        <!-- å±æœºå¹²é¢„æ¨¡æ¿åº“ -->
        <mxCell id="crisis-template" value="âš ï¸ å±æœºå¹²é¢„æ¨¡æ¿åº“&#xa;- è‡ªæ€å±æœºèµ„æº&#xa;- å¿ƒç†æ´åŠ©çƒ­çº¿&#xa;- æ— éœ€LLMè°ƒç”¨&#xa;&lt;500msç›´æŽ¥è¿”å›ž" style="rounded=1;fillColor=#fca5a5;strokeColor=#b91c1c;strokeWidth=3;fontStyle=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="400" y="240" width="160" height="100" as="geometry" />
        </mxCell>
        
        <!-- æ™ºèƒ½è·¯ç”±å™¨ -->
        <mxCell id="router" value="ðŸ§­ æ™ºèƒ½è·¯ç”±å™¨&#xa;- æ„å›¾è¯†åˆ«&#xa;- æ¨¡å¼åˆ‡æ¢&#xa;- æµé‡åˆ†å‘" style="rounded=1;fillColor=#ddd6fe;strokeColor=#7c3aed;strokeWidth=2;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="150" y="380" width="180" height="70" as="geometry" />
        </mxCell>
        
        <!-- åŒæ­¥å¤„ç†å±‚ -->
        <mxCell id="sync-layer" value="âš¡ åŒæ­¥å±‚ (å®žæ—¶å“åº” p95&lt;1.5s)" style="swimlane;fillColor=#d1fae5;strokeColor=#10b981;strokeWidth=2;fontStyle=1;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="50" y="520" width="700" height="420" as="geometry" />
        </mxCell>
        
        <!-- å¿«é€Ÿé€šé“ -->
        <mxCell id="fast-path" value="ðŸƒ å¿«é€Ÿé€šé“ (ç®€å•å¯¹è¯ &lt;500ms)" style="swimlane;fillColor=#a7f3d0;strokeColor=#059669;fontStyle=1;fontSize=11;" vertex="1" parent="sync-layer">
          <mxGeometry x="20" y="40" width="200" height="150" as="geometry" />
        </mxCell>
        <mxCell id="e-sensor1" value="ðŸ‘ï¸ æƒ…æ„Ÿä¼ æ„Ÿå™¨-å¿«é€Ÿç‰ˆ&#xa;- åŸºç¡€æƒ…ç»ªè¯†åˆ«&#xa;- è¾“å‡º: æƒ…ç»ªæ ‡ç­¾" style="rounded=1;fillColor=#6ee7b7;" vertex="1" parent="fast-path">
          <mxGeometry x="10" y="35" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="simple-chat" value="ðŸ’¬ åŸºç¡€å¯¹è¯Agent&#xa;- å°æ¨¡åž‹(qwen-turbo)&#xa;- æ¨¡æ¿ç¼“å­˜" style="rounded=1;fillColor=#6ee7b7;" vertex="1" parent="fast-path">
          <mxGeometry x="10" y="95" width="180" height="45" as="geometry" />
        </mxCell>
        
        <!-- æ™ºèƒ½é€šé“ -->
        <mxCell id="smart-path" value="ðŸ§  æ™ºèƒ½é€šé“ (å¤æ‚ä»»åŠ¡ &lt;1.5s)" style="swimlane;fillColor=#a7f3d0;strokeColor=#059669;fontStyle=1;fontSize=11;" vertex="1" parent="sync-layer">
          <mxGeometry x="240" y="40" width="220" height="250" as="geometry" />
        </mxCell>
        <mxCell id="e-sensor2" value="ðŸ‘ï¸ æƒ…æ„Ÿä¼ æ„Ÿå™¨-æ™ºèƒ½ç‰ˆ&#xa;- æ·±åº¦æƒ…ç»ªåˆ†æž&#xa;- è¾“å‡º: å¤šç»´æƒ…ç»ª+ç­–ç•¥" style="rounded=1;fillColor=#6ee7b7;" vertex="1" parent="smart-path">
          <mxGeometry x="10" y="35" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="orchestrator" value="ðŸŽ¯ ç¼–æŽ’å™¨ (O)&#xa;- æŽ¥æ”¶æƒ…ç»ªç­–ç•¥&#xa;- Planningè§„åˆ’&#xa;- å·¥å…·è°ƒç”¨ç¼–æŽ’" style="rounded=1;fillColor=#6ee7b7;" vertex="1" parent="smart-path">
          <mxGeometry x="10" y="95" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="tools" value="ðŸ”§ å·¥å…·åº“&#xa;- è®°å¿†æŸ¥è¯¢å·¥å…·&#xa;- å±æœºæ£€æµ‹å·¥å…·&#xa;- æƒ…ç»ªå®‰æŠšç­–ç•¥åº“" style="rounded=1;fillColor=#fed7aa;strokeColor=#ea580c;" vertex="1" parent="smart-path">
          <mxGeometry x="10" y="165" width="200" height="55" as="geometry" />
        </mxCell>
        
        <mxCell id="memory-fast" value="ðŸ“¦ å¿«é€Ÿè®°å¿†&#xa;(Redisç¼“å­˜)" style="rounded=1;fillColor=#fed7aa;strokeColor=#ea580c;" vertex="1" parent="sync-layer">
          <mxGeometry x="480" y="50" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="e-chat" value="ðŸ’Ž æƒ…æ„Ÿå¯¹è¯Agent&#xa;- äººæ ¼é©±åŠ¨&#xa;- æƒ…ç»ªè‡ªé€‚åº”&#xa;- å…±æƒ…å›žå¤ç”Ÿæˆ" style="rounded=1;fillColor=#6ee7b7;" vertex="1" parent="sync-layer">
          <mxGeometry x="480" y="120" width="180" height="65" as="geometry" />
        </mxCell>
        
        <!-- VIPä¸“å±žAgent -->
        <mxCell id="vip-agents" value="ðŸ‘‘ VIPä¸“å±žAgent" style="swimlane;fillColor=#fde68a;strokeColor=#f59e0b;fontStyle=1;fontSize=11;" vertex="1" parent="sync-layer">
          <mxGeometry x="240" y="310" width="220" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ec-agent" value="ðŸ©º æƒ…æ„Ÿæ•™ç»ƒAgent&#xa;(åŸºäºŽCBTç†è®º)" style="rounded=1;fillColor=#fcd34d;" vertex="1" parent="vip-agents">
          <mxGeometry x="10" y="30" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="im-agent" value="ðŸ’• äº²å¯†æ¨¡å¼Agent&#xa;(æœ‰å®‰å…¨è¾¹ç•Œ)" style="rounded=1;fillColor=#fcd34d;" vertex="1" parent="vip-agents">
          <mxGeometry x="115" y="30" width="95" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="critic" value="ðŸ” è¯„å®¡å‘˜ (C)&#xa;- å†…å®¹è´¨é‡æ£€æŸ¥&#xa;- ä¸Šä¸‹æ–‡ä¸€è‡´æ€§&#xa;- è½»é‡çº§SLM" style="rounded=1;fillColor=#6ee7b7;" vertex="1" parent="sync-layer">
          <mxGeometry x="480" y="210" width="180" height="65" as="geometry" />
        </mxCell>
        
        <mxCell id="safety" value="ðŸ›¡ï¸ åŒå±‚å®‰å…¨&#xa;- æ•æ„Ÿè¯è¿‡æ»¤&#xa;- åŒºåŸŸç­–ç•¥&#xa;- åˆè§„æ£€æŸ¥" style="rounded=1;fillColor=#fca5a5;strokeColor=#b91c1c;strokeWidth=2;" vertex="1" parent="sync-layer">
          <mxGeometry x="480" y="295" width="180" height="75" as="geometry" />
        </mxCell>
        
        <!-- å¼‚æ­¥å¤„ç†å±‚ -->
        <mxCell id="async-layer" value="ðŸŒ™ å¼‚æ­¥å±‚ (åŽå°æ™ºèƒ½å¤„ç†)" style="swimlane;fillColor=#fbcfe8;strokeColor=#ec4899;strokeWidth=2;fontStyle=1;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="800" y="520" width="350" height="300" as="geometry" />
        </mxCell>
        
        <mxCell id="queue" value="ðŸ“¨ æ¶ˆæ¯é˜Ÿåˆ—&#xa;(RabbitMQ/Redis)" style="rounded=1;fillColor=#f9a8d4;" vertex="1" parent="async-layer">
          <mxGeometry x="20" y="40" width="150" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="async-workers" value="ðŸ”¬ åŽå°ä¸“å®¶å›¢é˜Ÿ" style="swimlane;fillColor=#f9a8d4;fontStyle=1;fontSize=11;" vertex="1" parent="async-layer">
          <mxGeometry x="20" y="110" width="310" height="170" as="geometry" />
        </mxCell>
        <mxCell id="memory-analyst" value="ðŸ§  è®°å¿†åˆ†æžå¸ˆ&#xa;- å¯¹è¯æ€»ç»“" style="rounded=1;fillColor=#fbcfe8;" vertex="1" parent="async-workers">
          <mxGeometry x="10" y="30" width="140" height="35" as="geometry" />
        </mxCell>
        <mxCell id="reflection-agent" value="ðŸªž åæ€Agent&#xa;- äººè®¾ä¸€è‡´æ€§" style="rounded=1;fillColor=#fbcfe8;" vertex="1" parent="async-workers">
          <mxGeometry x="160" y="30" width="140" height="35" as="geometry" />
        </mxCell>
        <mxCell id="goal-tracker" value="ðŸŽ¯ ç›®æ ‡è¿½è¸ªå™¨&#xa;- è¿›åº¦è¯„ä¼°" style="rounded=1;fillColor=#fbcfe8;" vertex="1" parent="async-workers">
          <mxGeometry x="10" y="75" width="140" height="35" as="geometry" />
        </mxCell>
        <mxCell id="error-corrector" value="ðŸ”§ çº é”™å¤„ç†å™¨&#xa;- è®°å¿†ä¿®æ­£" style="rounded=1;fillColor=#fbcfe8;" vertex="1" parent="async-workers">
          <mxGeometry x="160" y="75" width="140" height="35" as="geometry" />
        </mxCell>
        
        <!-- ä¸»åŠ¨å…³æ€€ç³»ç»Ÿ -->
        <mxCell id="proactive-system" value="â° ä¸»åŠ¨å…³æ€€ç³»ç»Ÿ" style="swimlane;fillColor=#c4b5fd;strokeColor=#8b5cf6;strokeWidth=2;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="800" y="50" width="350" height="150" as="geometry" />
        </mxCell>
        <mxCell id="time-trigger" value="â° å®šæ—¶è§¦å‘&#xa;(æ—©æ™šé—®å€™)" style="rounded=1;fillColor=#ddd6fe;" vertex="1" parent="proactive-system">
          <mxGeometry x="20" y="40" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="event-trigger" value="ðŸŽ‰ äº‹ä»¶è§¦å‘&#xa;(çºªå¿µæ—¥/é‡Œç¨‹ç¢‘)" style="rounded=1;fillColor=#ddd6fe;" vertex="1" parent="proactive-system">
          <mxGeometry x="180" y="40" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="emotion-trigger" value="ðŸ’” æƒ…ç»ªè§¦å‘&#xa;(è¿žç»­æœªèŠå¤©/å±æœº)" style="rounded=1;fillColor=#ddd6fe;" vertex="1" parent="proactive-system">
          <mxGeometry x="20" y="90" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="goal-trigger" value="ðŸ“Š ç›®æ ‡è§¦å‘&#xa;(å‘¨å›žé¡¾/æœˆæ€»ç»“)" style="rounded=1;fillColor=#ddd6fe;" vertex="1" parent="proactive-system">
          <mxGeometry x="180" y="90" width="150" height="40" as="geometry" />
        </mxCell>
        
        <!-- è®°å¿†å¼•æ“Ž -->
        <mxCell id="memory-engine" value="ðŸ§  è®°å¿†å¼•æ“Ž (ä¸‰å±‚æž¶æž„)" style="swimlane;fillColor=#fed7aa;strokeColor=#ea580c;strokeWidth=2;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="800" y="250" width="350" height="200" as="geometry" />
        </mxCell>
        <mxCell id="short-memory" value="âš¡ çŸ­æœŸè®°å¿† (Redis)&#xa;- ä¼šè¯ä¸Šä¸‹æ–‡&#xa;- 24å°æ—¶å†…" style="rounded=1;fillColor=#fdba74;" vertex="1" parent="memory-engine">
          <mxGeometry x="20" y="40" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="long-memory" value="ðŸ“š é•¿æœŸè®°å¿† (pgvector)&#xa;- äº‹å®ž/åå¥½&#xa;- RAGæ£€ç´¢" style="rounded=1;fillColor=#fdba74;" vertex="1" parent="memory-engine">
          <mxGeometry x="20" y="90" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="graph-memory" value="ðŸ•¸ï¸ å…³ç³»å›¾è°± (Neo4j)&#xa;- äººç‰©å…³ç³»&#xa;- äº‹ä»¶æ—¶é—´çº¿" style="rounded=1;fillColor=#fdba74;" vertex="1" parent="memory-engine">
          <mxGeometry x="20" y="140" width="300" height="40" as="geometry" />
        </mxCell>
        
        <!-- æ•°æ®ä¸Žç›‘æŽ§å±‚ -->
        <mxCell id="data-layer" value="ðŸ“Š æ•°æ®ä¸Žç›‘æŽ§å±‚" style="swimlane;fillColor=#e0e7ff;strokeColor:#6366f1;strokeWidth=2;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1200" y="520" width="350" height="150" as="geometry" />
        </mxCell>
        <mxCell id="analytics" value="ðŸ“ˆ åˆ†æžå¼•æ“Ž&#xa;- åŸ‹ç‚¹ç»Ÿè®¡" style="rounded=1;fillColor=#c7d2fe;" vertex="1" parent="data-layer">
          <mxGeometry x="20" y="40" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="metrics" value="ðŸ“‰ æŒ‡æ ‡ç›‘æŽ§&#xa;- å“åº”æ—¶é—´" style="rounded=1;fillColor=#c7d2fe;" vertex="1" parent="data-layer">
          <mxGeometry x="180" y="40" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="evaluation" value="âœ… è¯„æµ‹ç³»ç»Ÿ&#xa;- é»„é‡‘æµ‹è¯•é›†" style="rounded=1;fillColor=#c7d2fe;" vertex="1" parent="data-layer">
          <mxGeometry x="100" y="90" width="150" height="40" as="geometry" />
        </mxCell>
        
        <!-- è¿žæŽ¥çº¿ - æ­£å¸¸æµç¨‹ -->
        <mxCell id="conn1" edge="1" source="user-ui" target="gateway" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn2" value="1. å¯¹è¯æ¶ˆæ¯" edge="1" source="gateway" target="router" parent="1" style="strokeWidth=2;strokeColor=#0284c7;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- å±æœºè·¯å¾„ (çº¢è‰²è™šçº¿) -->
        <mxCell id="crisis-conn1" edge="1" source="gateway" target="crisis-template" parent="1" style="strokeWidth=3;strokeColor=#dc2626;dashed=1;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="380" y="290" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="crisis-label" value="ðŸš¨æ£€æµ‹åˆ°å±æœºä¿¡å·&#xa;(æƒ³æ­»/è‡ªæ€)" style="edgeLabel;html=1;align=center;verticalAlign=middle;fillColor=#fee2e2;strokeColor=#dc2626;fontStyle=1;" vertex="1" parent="crisis-conn1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="0" y="-10" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="crisis-conn2" edge="1" source="crisis-template" target="user-ui" parent="1" style="strokeWidth=3;strokeColor=#dc2626;dashed=1;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="480" y="150" />
              <mxPoint x="130" y="150" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="crisis-label2" value="&lt;500msç›´æŽ¥è¿”å›ž" style="edgeLabel;html=1;align=center;verticalAlign=middle;fillColor=#fee2e2;strokeColor=#dc2626;fontStyle=1;" vertex="1" parent="crisis-conn2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="0" y="-10" as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- è·¯ç”±åˆ†å‘ -->
        <mxCell id="conn3" value="3a. ç®€å•é—²èŠ" edge="1" source="router" target="fast-path" parent="1" style="strokeWidth=2;strokeColor=#059669;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-10" y="0" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="conn4" value="3b. å¤æ‚ä»»åŠ¡" edge="1" source="router" target="smart-path" parent="1" style="strokeWidth=2;strokeColor=#059669;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="10" y="0" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="conn5" value="3c. VIPåŠŸèƒ½" edge="1" source="router" target="vip-agents" parent="1" style="strokeWidth=2;strokeColor=#f59e0b;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="240" y="470" />
              <mxPoint x="240" y="500" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- å¿«é€Ÿé€šé“å†…éƒ¨ -->
        <mxCell id="conn6" value="æƒ…ç»ªæ ‡ç­¾" edge="1" source="e-sensor1" target="simple-chat" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- æ™ºèƒ½é€šé“å†…éƒ¨ -->
        <mxCell id="conn7" value="å¤šç»´æƒ…ç»ª+ç­–ç•¥" edge="1" source="e-sensor2" target="orchestrator" parent="1" style="strokeWidth=2;strokeColor=#059669;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn8" edge="1" source="orchestrator" target="tools" parent="1" style="strokeWidth=2;strokeColor=#ea580c;endArrow=classic;startArrow=classic;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn9" value="è°ƒç”¨å·¥å…·" style="edgeLabel;html=1;align=center;verticalAlign=middle;" vertex="1" parent="conn8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn10" edge="1" source="orchestrator" target="memory-fast" parent="1" style="endArrow=classic;startArrow=classic;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn11" edge="1" source="memory-fast" target="memory-engine" parent="1" style="endArrow=classic;startArrow=classic;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn12" value="ä¼ é€’æƒ…ç»ª+ä¸Šä¸‹æ–‡" edge="1" source="orchestrator" target="e-chat" parent="1" style="strokeWidth=2;strokeColor=#059669;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- è¯„å®¡æµç¨‹ -->
        <mxCell id="conn13" value="å¿«é€Ÿå›žå¤" edge="1" source="simple-chat" target="critic" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="200" y="792" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn14" value="æƒ…ç»ªè‡ªé€‚åº”å›žå¤" edge="1" source="e-chat" target="critic" parent="1" style="strokeWidth=2;">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="0" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="conn15" edge="1" source="vip-agents" target="critic" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="500" y="500" />
              <mxPoint x="650" y="500" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- å®‰å…¨æ£€æŸ¥ -->
        <mxCell id="conn16" value="âœ… é€šè¿‡" edge="1" source="critic" target="safety" parent="1" style="strokeWidth=2;strokeColor=#10b981;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="conn17" value="ðŸ”’ æœ€ç»ˆå®‰å…¨æ£€æŸ¥" edge="1" source="safety" target="gateway" parent="1" style="strokeWidth=2;strokeColor=#b91c1c;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="750" y="833" />
              <mxPoint x="750" y="480" />
              <mxPoint x="240" y="480" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="conn18" value="10. è¿”å›žå›žå¤" edge="1" source="gateway" target="user-ui" parent="1" style="strokeWidth=2;strokeColor=#10b981;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="130" y="250" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- å¼‚æ­¥è·¯å¾„ (è™šçº¿) -->
        <mxCell id="async-conn1" value="å†™å…¥èŠå¤©è®°å½•" edge="1" source="e-chat" target="queue" parent="1" style="dashed=1;strokeColor=#ec4899;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="700" y="725" />
              <mxPoint x="850" y="520" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="async-conn2" edge="1" source="queue" target="memory-analyst" parent="1" style="dashed=1;strokeColor=#ec4899;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="async-conn3" edge="1" source="memory-analyst" target="memory-engine" parent="1" style="dashed=1;strokeColor=#ea580c;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1050" y="630" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- ä¸»åŠ¨è§¦å‘ -->
        <mxCell id="proactive-conn1" edge="1" source="time-trigger" target="queue" parent="1" style="dashed=1;strokeColor=#8b5cf6;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="890" y="250" />
              <mxPoint x="890" y="480" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- çº é”™è·¯å¾„ -->
        <mxCell id="memory-conn" value="X. è®°å¿†çº é”™" edge="1" source="memory-ui" target="queue" parent="1" style="dashed=1;strokeColor=#f59e0b;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="280" y="230" />
              <mxPoint x="780" y="230" />
              <mxPoint x="780" y="480" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="error-conn" edge="1" source="queue" target="error-corrector" parent="1" style="dashed=1;">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- ç›‘æŽ§è¿žæŽ¥ -->
        <mxCell id="monitor-conn1" edge="1" source="gateway" target="analytics" parent="1" style="dashed=1;strokeColor=#6366f1;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="240" y="350" />
              <mxPoint x="1100" y="350" />
              <mxPoint x="1100" y="580" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="monitor-conn2" edge="1" source="orchestrator" target="metrics" parent="1" style="dashed=1;strokeColor=#6366f1;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1180" y="655" />
              <mxPoint x="1180" y="580" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- æ ‡é¢˜å’Œè¯´æ˜Ž -->
        <mxCell id="title" value="AIä¼´ä¾£Agentå®Œæ•´æž¶æž„å›¾ V2.0" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="10" width="400" height="30" as="geometry" />
        </mxCell>
        
        <!-- å›¾ä¾‹ -->
        <mxCell id="legend" value="å›¾ä¾‹" style="swimlane;fillColor=#f3f4f6;strokeColor=#6b7280;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1200" y="50" width="350" height="200" as="geometry" />
        </mxCell>
        <mxCell id="legend1" value="å®žçº¿ç®­å¤´: åŒæ­¥è°ƒç”¨" style="text;html=1;align=left;" vertex="1" parent="legend">
          <mxGeometry x="10" y="30" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend2" value="è™šçº¿ç®­å¤´: å¼‚æ­¥å¤„ç†" style="text;html=1;align=left;" vertex="1" parent="legend">
          <mxGeometry x="10" y="55" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend3" value="çº¢è‰²ç²—çº¿: å±æœºç‰¹æ®Šè·¯å¾„" style="text;html=1;align=left;" vertex="1" parent="legend">
          <mxGeometry x="10" y="80" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend4" value="ç»¿è‰²åŒºåŸŸ: åŒæ­¥å±‚(å®žæ—¶å“åº”)" style="text;html=1;align=left;" vertex="1" parent="legend">
          <mxGeometry x="10" y="105" width="220" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend5" value="ç²‰è‰²åŒºåŸŸ: å¼‚æ­¥å±‚(åŽå°å¤„ç†)" style="text;html=1;align=left;" vertex="1" parent="legend">
          <mxGeometry x="10" y="130" width="220" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend6" value="é»„è‰²åŒºåŸŸ: APIç½‘å…³/è·¯ç”±å±‚" style="text;html=1;align=left;" vertex="1" parent="legend">
          <mxGeometry x="10" y="155" width="220" height="20" as="geometry" />
        </mxCell>
        
        <!-- æ€§èƒ½æŒ‡æ ‡æ ‡æ³¨ -->
        <mxCell id="perf-note" value="æ€§èƒ½ç›®æ ‡:&#xa;å¿«é€Ÿé€šé“ &lt;500ms&#xa;æ™ºèƒ½é€šé“ &lt;1.5s&#xa;å±æœºå“åº” &lt;500ms" style="text;html=1;strokeColor=#f59e0b;fillColor=#fef3c7;align=left;verticalAlign=top;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="1050" width="150" height="80" as="geometry" />
        </mxCell>

        <!-- å…³é”®æµç¨‹æ ‡æ³¨ -->
        <mxCell id="key-process" value="å…³é”®æµç¨‹:&#xa;1. æƒ…ç»ªæ„ŸçŸ¥â†’ç­–ç•¥å»ºè®®&#xa;2. ç¼–æŽ’å™¨å†³ç­–å·¥å…·è°ƒç”¨&#xa;3. E_Chatæƒ…ç»ªè‡ªé€‚åº”&#xa;4. Criticè´¨é‡æŠŠå…³&#xa;5. å¼‚æ­¥è®°å¿†æ²‰æ·€" style="text;html=1;strokeColor=#10b981;fillColor=#d1fae5;align=left;verticalAlign=top;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="220" y="1050" width="200" height="100" as="geometry" />
        </mxCell>
        
        <!-- åŒå‘ç®­å¤´æ ‡æ³¨ -->
        <mxCell id="note-bidirectional" value="âŸ· è¡¨ç¤ºè¯»å†™äº¤äº’" style="text;html=1;align=center;fontSize=9;fillColor=#fef3c7;" vertex="1" parent="1">
          <mxGeometry x="670" y="980" width="120" height="20" as="geometry" />
        </mxCell>

        <!-- æ ¸å¿ƒAgentæ ‡æ³¨ -->
        <mxCell id="agent-note1" value="E_Sensor2æ˜¯æƒ…ç»ªè¯†åˆ«+ç­–ç•¥å»ºè®®çš„æ ¸å¿ƒ" style="text;html=1;strokeColor=#059669;fillColor=#d1fae5;align=center;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="50" y="980" width="260" height="30" as="geometry" />
        </mxCell>

        <mxCell id="agent-note2" value="Orchestratoræ ¹æ®ç­–ç•¥å†³å®šæ˜¯å¦è°ƒç”¨å·¥å…·åº“" style="text;html=1;align=center;fontSize=9;strokeColor=#059669;fillColor=#d1fae5;" vertex="1" parent="1">
          <mxGeometry x="340" y="980" width="280" height="30" as="geometry" />
        </mxCell>
        
        <!-- é‡è¯•æœºåˆ¶æ ‡æ³¨ -->
        <mxCell id="retry-arrow" edge="1" source="critic" target="orchestrator" parent="1" style="dashed=1;strokeColor=#dc2626;curved=1;startArrow=classic;">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="450" y="900" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="retry-label" value="âŒ é©³å›žé‡åš&#xa;(æœ€å¤š2æ¬¡)" style="edgeLabel;html=1;align=center;verticalAlign=middle;fillColor=#fee2e2;strokeColor=#dc2626;fontSize=9;fontStyle=1;" vertex="1" parent="retry-arrow">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-50" y="0" as="offset" />
          </mxGeometry>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>